{% extends "Base_EMP.html" %}
{% block content %}

<div class="container mt-5 text-center">
    <h2 class="mb-4">ðŸ“… Company Event Calendar</h2>
    <div id="calendar"></div>
</div>

{% endblock %}

{% block extra_css %}
<!-- âœ… FullCalendar CSS -->
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.css" rel="stylesheet">

<style>
    body {
        font-family: Arial, sans-serif;
        background: #f0f2f5;
    }

    #calendar {
        max-width: 900px;
        margin: 40px auto;
        padding: 10px;
        background: #fff;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    .fc-tooltip {
        display: none;
        position: absolute;
        background: rgba(0, 0, 0, 0.8);
        color: white;
        padding: 5px 10px;
        border-radius: 5px;
        font-size: 0.8rem;
        z-index: 9999;
    }

    .fc-event:hover .fc-tooltip {
        display: block;
    }
</style>
{% endblock %}

{% block extra_js %}
<!-- âœ… FullCalendar JS -->
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.js"></script>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const calendarEl = document.getElementById('calendar');

        const calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth',
            headerToolbar: {
                left: 'prev,next today',
                center: 'title',
                right: 'dayGridMonth,listMonth'
            },
            height: 'auto',
            events: [
                {% for event in events %}
                {
                    title: "{{ event.title|escapejs }}",
                    start: "{{ event.start_time|date:'Y-m-d' }}",
                    end: "{{ event.end_time|date:'Y-m-d' }}",
                    description: "{{ event.description|escapejs }}",
                    allDay: true
                },
                {% endfor %}
            ],
            eventDidMount: function (info) {
                if (info.event.extendedProps.description) {
                    const tooltip = document.createElement('div');
                    tooltip.innerHTML = `<strong>${info.event.title}</strong><br>${info.event.extendedProps.description}`;
                    tooltip.className = 'fc-tooltip';
                    info.el.appendChild(tooltip);
                }
            }
        });

        calendar.render();
    });
</script>
{% endblock %}
