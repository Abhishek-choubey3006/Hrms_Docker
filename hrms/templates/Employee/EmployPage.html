{% extends "Base_EMP.html" %}
{% load static %}

{% block content %}
<div class="container-fluid my-3">
    <h2 class="mb-4 text-center">Welcome, {{ employee.first_name }} ðŸ‘‹</h2>

    <div class="row">
        <!-- Attendance -->
        <div class="col-lg-6 mb-4">
            <div class="card shadow p-3">
                <h5>Attendance Trend</h5>
                {{ attendance_chart|safe }}
            </div>
        </div>

        <!-- Leave Requests -->
        <div class="col-lg-6 mb-4">
            <div class="card shadow p-3">
                <h5>Leave Request Status</h5>
                {{ leave_chart|safe }}
            </div>
        </div>

        <!-- Payroll -->
        <div class="col-lg-6 mb-4">
            <div class="card shadow p-3">
                <h5>Salary Summary</h5>
                {{ payroll_chart|safe }}
            </div>
        </div>

        <!-- Skill Performance -->
        <div class="col-lg-6 mb-4">
            <div class="card shadow p-3">
                <h5>Skill Performance</h5>
                {{ skill_chart|safe }}
            </div>
        </div>

        <!-- Upcoming Meetings -->
        <div class="col-lg-6 mb-4">
            <div class="card shadow p-3">
                <h5>Upcoming Meetings</h5>
                <ul class="list-group">
                    {% for meeting in meetings %}
                        <li class="list-group-item">
                            <b>{{ meeting.msg_meeting }}</b> - {{ meeting.date_meeting|date:"d M, Y" }} @ {{ meeting.time_meeting }}
                        </li>
                    {% empty %}
                        <li class="list-group-item">No meetings scheduled</li>
                    {% endfor %}
                </ul>
            </div>
        </div>

        <!-- Assigned Projects -->
        <div class="col-lg-6 mb-4">
            <div class="card shadow p-3">
                <h5>Assigned Projects</h5>
                <ul class="list-group">
                    {% for project in projects %}
                        <li class="list-group-item">
                            <b>{{ project.name }}</b> â€” Priority: {{ project.priority }}
                        </li>
                    {% empty %}
                        <li class="list-group-item">No assigned projects</li>
                    {% endfor %}
                </ul>
            </div>
        </div>

        <!-- Notifications -->
        <div class="col-lg-12 mb-4">
            <div class="card shadow p-3">
                <h5>Latest Notifications</h5>
                <ul class="list-group">
                    {% for notify in notifications %}
                        <li class="list-group-item">
                            <b>{{ notify.category }}</b> â€” {{ notify.message }}
                            <span class="badge bg-info float-end">{{ notify.created_at|date:"d M, Y" }}</span>
                        </li>
                    {% empty %}
                        <li class="list-group-item">No notifications</li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>
</div>

{% endblock %}